<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>fake art</title>
    <style type="text/css">
      body {
        display: flex;
        height: 100vh;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      #picture {
        height: 700px;
        width: 500px;
        display: flex;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body>
    <script>
      let url = "liza.jpeg";
      //       let url = "vanGog.jpg";
    </script>

    <div id="picture"></div>

    <script>
      //
      // нужно при рисовании генерировать работу
      // - картина рисуется в среднем за 5 секунд
      //
      // нужно её сохранять до продажи
      // - генерим рандомы на каждый «пиксель»
      // - сохраняем все рандомы для каждой картины в local storage
      //
      // нужно её воспроизводить в таком же виде если вышли
      // из браузера и зашли обратно (пока она не продана)
      // - берём рандомы из local storage и генерим картину
      //
      // нужно генерировать новые работы, которые нарисовались
      // в оффлайне и ещё не продались
      // - при загрузке считаем сколько картин нужно нагенерить
      // - генерим картины
      // - кладём в local storage
      // - выводим картины
      //
      document.addEventListener("DOMContentLoaded", () => {
        let elem = document.getElementById("picture");
        // elem.style.backgroundImage = "url(" + url + ")";

        const imW = elem.offsetWidth;
        const imH = elem.offsetHeight;

        const count = 10;

        const divW = imW / count;
        const divH = imH / count;

        let i = 0;
        let y = 0;
        let top = 0;
        let left = 0;

        let paintingData = [
          "saturate(2%)",
          "none",
          "saturate(38%)",
          "saturate(38%)",
          "invert(158%)",
          "invert(157%)",
          "saturate(49%)",
          "hue-rotate(86deg)",
          "none",
          "invert(183%)",
          "saturate(37%)",
          "saturate(3%)",
          "saturate(39%)",
          "none",
          "hue-rotate(315deg)",
          "saturate(7%)",
          "invert(186%)",
          "none",
          "saturate(0%)",
          "saturate(8%)",
          "hue-rotate(14deg)",
          "hue-rotate(110deg)",
          "none",
          "none",
          "invert(108%)",
          "hue-rotate(224deg)",
          "saturate(40%)",
          "hue-rotate(311deg)",
          "none",
          "hue-rotate(226deg)",
          "saturate(0%)",
          "invert(184%)",
          "hue-rotate(15deg)",
          "hue-rotate(123deg)",
          "hue-rotate(61deg)",
          "none",
          "hue-rotate(165deg)",
          "none",
          "saturate(29%)",
          "none",
          "saturate(30%)",
          "invert(167%)",
          "hue-rotate(70deg)",
          "none",
          "none",
          "saturate(17%)",
          "saturate(5%)",
          "invert(158%)",
          "none",
          "invert(181%)",
          "saturate(49%)",
          "hue-rotate(124deg)",
          "none",
          "hue-rotate(23deg)",
          "invert(128%)",
          "hue-rotate(207deg)",
          "hue-rotate(182deg)",
          "invert(120%)",
          "hue-rotate(91deg)",
          "invert(160%)",
          "saturate(5%)",
          "invert(150%)",
          "none",
          "hue-rotate(146deg)",
          "saturate(1%)",
          "invert(174%)",
          "saturate(22%)",
          "none",
          "saturate(26%)",
          "saturate(16%)",
          "hue-rotate(176deg)",
          "hue-rotate(68deg)",
          "none",
          "none",
          "invert(135%)",
          "hue-rotate(95deg)",
          "hue-rotate(170deg)",
          "invert(117%)",
          "hue-rotate(249deg)",
          "hue-rotate(145deg)",
          "none",
          "saturate(35%)",
          "hue-rotate(157deg)",
          "invert(199%)",
          "invert(125%)",
          "saturate(0%)",
          "saturate(7%)",
          "saturate(4%)",
          "saturate(8%)",
          "none",
          "saturate(41%)",
          "none",
          "invert(196%)",
          "none",
          "saturate(31%)",
          "none",
          "invert(176%)",
          "saturate(14%)",
          "saturate(5%)",
          "invert(141%)",
        ];

        while (i < count * count) {
          let div = document.createElement("div");
          div.id = "div_" + i;

          if ((y == 0) & (i == 0)) {
            y += 1;
          } else {
            if (y > count - 1) {
              top += divH;
              left = 0;
              y = 1;
            } else {
              left += divW;
              y += 1;
            }
          }

          let filterCSS = paintingData[i];

          // if (filter == "normal") {
          //   filter = "none";
          // } else {
          //   filterValue = paintingData[i][1];
          //   filter = filterValue;
          // }

          div.style = `width: ${divW}px;
                       height: ${divH}px;
                       background-image: url(${url});
                       background-size: ${imW}px ${imH}px;
                       background-position: top ${-top}px left ${-left}px;
                       filter: ${filterCSS}`;
          // div.innerHTML = `<p>${left}|${top}|${y}</p>`;
          elem.append(div);

          i += 1;
        }

        // console.log(paintingData);
      });
    </script>
  </body>
</html>
